<!DOCTYPE html>
<html>
<head>
  <title>Wisley Tour</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="manifest" href="https://intense-woodland-96442.herokuapp.com/manifest.json">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
  <script type="module">
    import 'https://cdn.jsdelivr.net/npm/@pwabuilder/pwaupdate';
    const el = document.createElement('pwa-update');
    document.body.appendChild(el);
  </script>

  <style type="text/css">
    body {
       margin: 0;
       padding: 0;
    }
    html, body, #map{
       width: 100%;
       height: 100vh;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    //  var map = L.map('map').setView([51.15370198323349, -0.5051981364560665], 16.0);
    //  L.tileLayer('https://intense-woodland-96442.herokuapp.com/Rowly/{z}/{x}/{y}.png', {
      var map = L.map('map').setView([51.31491854089235, -0.475020752189743], 16.0);
      L.tileLayer('https://intense-woodland-96442.herokuapp.com/Wisley/{z}/{x}/{y}.png', {
        minZoom: 14,
    //    maxZoom: 18,
        maxZoom: 20, 
        tms: false,
        attribution: 'Generated by TilesXYZ'
      }).addTo(map);

    const poiData = {
      poi1: "<p><b>Photographers favourite</b></p><p>On the corner of the bed overlooking the water is a striking five-stemmed birch <em>Betula utilis</em> var. <em>jacquemontii</em> ‘Doorenbos’. It has a backdrop of drooping blue cedars, a carpet of <em>Erica</em> × <em>darleyensis</em> ‘White Spring Surprise’ and <em>Rubus thibetanus</em> – a well-behaved ornamental bramble.</p><p>Crinkly <em>Corokia cotoneaster</em> stems add a silvery interest into the mix. To its left, the bed is full of the photographer’s favourite willow, <em>Salix alba</em> var. <em>vitellina</em> ‘Yelverton’. On a sunny winter’s day it is simply stunning.</p><p>Walk along the path towards The Glasshouse, enjoying Oakwood on your left and look up at the towering <em>Pinus nigra</em> trees.</p><p>Stay on the hard path as it bears left, passing the glistening white birch tree <em>Betula utilis</em> var. <em>jacquemontii</em> ‘Grayswood Ghost’ AGM on the edge of Oakwood. A little further up on the right, the dogwood <em>Cornus sanguinea</em> ‘Magic Flame’ AGM creates a colourful fire-like stand of stems.</p><p>When you reach the right-hand turn, take a moment to admire the <em>Osmanthus</em> × <em>burkwoodii</em> just beyond the junction, which are cloud-pruned to give interesting structure for any time of year.</p><p>Here you can choose to take the right-hand turn to continue along the Winter Walk to Stop 2, or divert into The Glasshouse and Glasshouse Café.</p>",
      poi2: "<p><b>Snakebarks and winter wildfire</b></p><p>As you walk along the length of this path look left for the pine and <em>Berberis</em> columns that mirror the beech in the Glasshouse Landscape beyond. On your right, admire the intriguing twisted branches of the magnificent ironwood tree <em>Parrotia persica</em>.The scaly bark is attractive, and in January you might spot tiny red spider-like flowers. The wood of this tree is too heavy to float in water.</p><p>To the left, the ground is full of marbled-leaved hellebore [Anna’s Red]. In late winter these have deep red flowers that look lovely when the sunlight streams through.</p><p>A little further on at the end of the bed, <em>Acer davidii</em> ‘George Forrest’ AGM is one of a number of attention-seeking snakebark maples that come to the fore at this time of year, when their bark is prominent.</p><p>On the right-hand side of the path, bright red berries on <em>Viburnum betulifolium</em> hold well through the winter.</p>",
      poi3: "<p><b>Purple pearls and a golden glow</b></p><p>Nearly one hundred <em>Edgeworthia</em> shrubs fill the borders on the left. Their pendent clusters of fragrant flowers hang for months – eventually opening their yellow blooms in late winter.</p><p>With a colour that seems unlikely for a berry, <em>Callicarpa bodinieri</em> ‘Imperial Pearl’ bears violet-purple fruit from autumn into early winter.</p><p>Along here you’ll see <em>Abeliophyllum distichum</em> Roseum Group. This species goes by the common name of white forsythia, in reference to its forsythia-like flowers around February time, but this selection is pink-flowered. We’re growing it up ornate metal obelisks but it can also be grown as a free-standing or wall shrub.</p><p>From Stop 2 onwards, you will have walked past a succession of different golden conifers. They give a warm glow no matter what the weather. With great ornamental qualities, they really come to life during the winter. Their golden needles look pretty shining out brightly on a frosty morning.</p>",
      poi4: "<p><b>Contortion in silver circles</b></p><p>Silver birch trees such as the gleaming white <em>Betula utilis</em> var. <em>jacquemontii</em> are wonderful in winter. What special bark!</p><p>Here, the box (<em>Buxus</em>) balls on the right help to add shape and structure to the bed. These shrubs are doing well but given the spread of box blight and box tree caterpillar, we're growing a range of box alternatives in the Walled Garden. You can visit them to compare and contrast, and see what might work for you.</p><p>To add a curly comparison with the smooth outline of the box balls, contorted stems of the corkscrew hazel <em>Corylus avellana</em> ‘Contorta’ give contrast and interest. In midwinter, look for the familiar male catkins, as well as the tiny, spidery female flowers.</p><p>Could their resemblance to <em>Hamamelis</em> flowers explain the common name witch hazel? You might see similar flowers on <em>Parrotia persica</em> trees.</p><p>In the surrounding tree circles <em>Iris</em> ‘Harmony’ complements the late winter scene with a carpet of blue.</p>",
      poi5: "<p><b>Fire by the Lake</b></p><p>As you approach the babbling stream enjoy the combination of <em>Salix fargesii</em> AGM, <em>Ophiopogon planiscapus</em> ‘Nigrescens’ AGM, <em>Libertia ixioides</em> ‘Goldfinger’, <em>Pittosporum tenuifolium</em> ‘Tom Thumb’ AGM and <em>Acer davidii</em> Viper (‘Mindavi’).</p><p>Walk further up past the bench and let your hand brush past the needles of <em>Pinus strobus</em> ‘Tiny Kurls’. These slow-growing, tactile conifers are within reach of the path, and their short, twisted blue-green needles add texture, contrast and softness.</p><p>Behind these is <em>Nandina domestica</em>, sometimes called heavenly bamboo. With ferociously red leaves, the dwarf cultivar ‘Seika’ is named from the Japanese for ‘sacred fire’.</p><p>Further up the bed beside the lake is a deciduous conifer <em>Taxodium distichum</em> ‘Wisley Flame’. This swamp cypress holds its autumnal orange needles for up to four weeks longer than usual. Then they fall and carpet the ground all winter.</p><p>Turn around to find Stop 6.</p>",
      poi6: "<p><b>Serpents in the wood</b></p><p>Colours and textures dominate this area. Blue contrasts with yellow throughout the bed – <em>Cupressus arizonica</em> var. <em>glabra</em> ‘Blue Ice’ is dotted through the bed, mingling with yellow from tree heathers, golden pines and yellow-stemmed <em>Salix</em> (willow).</p><p>Glossy, peeling bark of multi- stemmed <em>Prunus serrula</em> trees around Stop 5 and 6 add richness. Here, rivers of winter-flowering heather <em>Erica</em> × <em>darleyensis</em> ‘Snow Surprise’ flow around them.</p><p>Showstopping witch hazels fill this area – ever popular for its scent and colour is <em>Hamamelis</em> × <em>intermedia</em> ‘Pallida’ AGM.</p><p>Continue along the hard path to discover contrasting conifers.</p><p>Against the snake-like bark of <em>Acer davidii</em> Viper (‘Mindavi’), the scaly tendril-like branches of <em>Thuja plicata</em> ‘Whipcord’ and the silvery leaves of <em>Euonymus fortunei</em> ‘Silver Queen’ stand out. You may notice some small, round fruits from the large pear tree overhead, <em>Pyrus pashia</em>.",
      poi7: "<p><b>Colour, contrasts and reflections</b></p><p>Walk over to the lakeside, full of different coloured stems. Among the <em>Cornus</em> (dogwood) and <em>Salix</em> (willow), look out for the maple <em>Acer negundo</em> ‘Winter Lightning’ grown, unusually, for its winter stem colour.</p><p>Arched white-bloomed stems of the bramble <em>Rubus cockburnianus</em> and fiery stems of <em>Cornus sanguinea</em> ‘Anny’s Winter Orange’ add to the colourful effect.</p><p>On a sunny day in winter, the view of these winter stems is iconic.</p><p>On the corner opposite, the fragrant shrub <em>Chimonanthus praecox</em> ‘Luteus’ blooms with translucent bell-shaped flowers in late winter. Underneath, <em>Helleborus</em> Walberton’s Rosemary (‘Walhero’) AGM covers the ground with sturdy pink blooms.</p><p>On the right, <em>Salix gracilistyla</em> ‘Mount Aso’ bears furry pink catkins in late winter, and <em>Edgeworthia chrysantha</em> ‘Red Dragon’ adds a different twist.</p><p>Bear right on the path and follow the <em>Hamamelis</em>. Continue as the path bears right with <em>Hamamelis</em> on the right, and then left, to Stop 8.</p>",
      poi8: "<p><b>Witch hazels and winter cherries</b></p><p>Scented witch hazels are densely planted in bands of colour: <em>Hamamelis</em> × <em>intermedia</em> ‘Robert’, ‘Jelena’, ‘Aphrodite’ and ‘Barmstedt Gold’ with ‘Rubin’ across the path. These all hold the prestigious Award of Garden Merit (AGM).</p><p>Underneath, silvery, green, lace- marked, heart-shaped leaves of <em>Cyclamen hederifolium</em> cover the ground. Look closely and you might spot tight spirals where the stems take seeds to ground level.</p><p>On the opposite corner, four flowering cherry trees create a twinkling effect by blossoming on and off through the winter. These are <em>Prunus incisa</em> ‘Praecox’, where the cultivar name of praecox means “very early”, referring to its flowering time.</p><p>At the cross roads go straight on to find scented <em>Daphne bholua</em> - curiously, some are deciduous, some evergreen but all the same species.</p><p>There's an impressive stand of three variegated hollies <em>Ilex aquifolium</em> ‘Madame Briot’ AGM on the right. Turn right before the gate.",
      poi9: "<p><b>A hedge on stilts</b></p><p>As you walk towards the Food Hall, notice the variety of small conifers both sides of the path in contrasting textures, shapes and colours. Among them are wiry-looking <em>Cryptomeria japonica</em> Araucarioides Group, <em>Picea omorika</em> ‘Pendula’ AGM, <em>Cryptomeria japonica</em> ‘Little Champion’ and the blue <em>Abies concolor</em> ‘Compacta’ AGM.</p><p>On the corner nestled among them is a fine example of <em>Prunus serrula</em>, the Tibetan cherry. With rich mahogany- coloured bark that flakes and peels away in bands, the trunk is left looking glossy.</p><p>Turn left and ahead of you is <em>Tilia cordata</em> ‘Winter Orange’, trimmed in late winter to show off the youngest stems that have the most colour for the next winter season. This line of lime trees is creatively pruned to look as though it is a hedge on stilts – a technique known as pleaching. The trick is to train trees to produce a narrow hedge by tying and interlacing flexible young shoots along a supporting framework."
    };  

    var poiIcon = L.icon({
      iconUrl: 'https://intense-woodland-96442.herokuapp.com/Assets/rhsLogo.png',
      iconSize: [30, 38]
    });

    var poi1  = L.marker([51.3147364, -0.4753614], {icon: poiIcon}).bindPopup(poiData.poi1),
        poi2  = L.marker([51.3145914, -0.4776044], {icon: poiIcon}).bindPopup(poiData.poi2),
        poi3  = L.marker([51.3152497, -0.4775300], {icon: poiIcon}).bindPopup(poiData.poi3),
        poi4  = L.marker([51.3154701, -0.4771034], {icon: poiIcon}).bindPopup(poiData.poi4),
        poi5  = L.marker([51.3155630, -0.4761910], {icon: poiIcon}).bindPopup(poiData.poi5),
        poi6  = L.marker([51.3157252, -0.4760261], {icon: poiIcon}).bindPopup(poiData.poi6),
        poi7  = L.marker([51.3156262, -0.4753292], {icon: poiIcon}).bindPopup(poiData.poi7),
        poi8  = L.marker([51.3158642, -0.4745867], {icon: poiIcon}).bindPopup(poiData.poi8),
        poi9  = L.marker([51.3158425, -0.4737306], {icon: poiIcon}).bindPopup(poiData.poi9);
  
    var pointsOfInterest = L.layerGroup([poi1, poi2, poi3, poi4, poi5, poi6, poi7, poi8, poi9]);
    map.addLayer(pointsOfInterest);


    // create route for the winter walk
    var latlngs = [
      [51.3147138, -0.4753819],
      [51.3147868, -0.4755869],
      [51.3148215, -0.4757998],
      [51.3148677, -0.4762813],
      [51.3148059, -0.4764930],
      [51.3145677, -0.4769495],
      [51.3144471, -0.4775942],
      [51.3145618, -0.4775989],
      [51.3146794, -0.4776318],
      [51.3147530, -0.4775622],
      [51.3148650, -0.4775281],
      [51.3152356, -0.4775494],
      [51.3154303, -0.4772721],
      [51.3154756, -0.4770801],
      [51.3155076, -0.4764530],
      [51.3155689, -0.4762056],
      [51.3156249, -0.4761203],
      [51.3157049, -0.4757662],
      [51.3157023, -0.4751135],
      [51.3158419, -0.4748983],
      [51.3158444, -0.4747196],
      [51.3158850, -0.4745612],
      [51.3158952, -0.4744354],
      [51.3159992, -0.4742892],
      [51.3160754, -0.4740415],
      [51.3161261, -0.4737816],
      [51.3161109, -0.4735704],
      [51.3159383, -0.4736273],
      [51.3158088, -0.4738345]
    ];

    // mark the route on the map
    var polyline = L.polyline(latlngs, {color: '#23AD23', weight: 4, smoothFactor: 3}).addTo(map);
    // zoom the map to the polyline
    map.fitBounds(polyline.getBounds());

    
    var marker;

    function onLocationFound(e) {
      // var radius = e.accuracy;

      if(!marker) {
        marker = L.marker(e.latlng).addTo(map);
      } else {
        marker.setLatLng(e.latlng);
      }
      
      var zoom = map.getZoom();
      map.setView(e.latlng, zoom);
      // L.circle(e.latlng, radius).addTo(map);
    }

      function onLocationError(e) {
        alert(e.message);
    }
    map.locate({watch: true, enableHighAccuracy: true});
    map.on('locationfound', onLocationFound);
    map.on('locationerror', onLocationError);

  </script>

  <script>
    // Check that service workers are supported
    if ('serviceWorker' in navigator) {
      // Use the window load event to keep the page load performant
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('https://intense-woodland-96442.herokuapp.com/sw.js');
      });
    }
  </script>

</body>
</html>

